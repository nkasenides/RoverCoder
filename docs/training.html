<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Rover Coder</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/style.css">
    <script src="interpreter/acorn_interpreter.js"></script>
</head>
<body>

    <div id="canvasWrapper"></div>

    <script type="module">

        import {Game} from "./js/rover-coder.js";

        //Get player code:
        let code = sessionStorage.getItem("code");
        console.log(code);

        function initAPI(interpreter, scope) {

            // Add an API function for the alert() block.
            let wrapper = function(text) {
                return alert(arguments.length ? text : '');
            };
            interpreter.setProperty(scope, 'alert', interpreter.createNativeFunction(wrapper));



            // Add an API function for the prompt() block.
            wrapper = function(text) {
                return prompt(text);
            };
            interpreter.setProperty(scope, 'prompt', interpreter.createNativeFunction(wrapper));
        }

        let interpreter = new Interpreter(code, initAPI);

        //Start the game:
        let game = new Game("canvas", 20);
        game.start(code);

    </script>

</body>
</html>